(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{5750:function(e,t,n){Promise.resolve().then(n.t.bind(n,5250,23)),Promise.resolve().then(n.bind(n,2305))},2305:function(e,t,n){"use strict";n.r(t),n.d(t,{OptionsCustomComponent:function(){return h},default:function(){return m}});var s=n(7437),a=n(5501),r=n(9625),o=n(2265),i=n(9721),l=n(4033);function c(e){let{id:t,reload:n}=e,a=(0,l.useRouter)();async function r(){await (0,i.tm)(t),a.refresh(),n&&n()}return(0,s.jsx)("button",{className:"btn btn-xs",onClick:async()=>await r(),children:"Delete"})}var u=n(6026);let d="edit-account";function m(){let[e,t]=(0,o.useState)([]),[n,l]=(0,o.useState)("");async function c(){t(await (0,i.T8)())}return(0,o.useEffect)(()=>{c()},[]),(0,s.jsxs)("section",{className:"overflow-x-auto",children:[(0,s.jsx)(a.Z,{config:{tableName:"accounts",columnSettings:[{columnName:"Id",key:"id"},{columnName:"Name",key:"name"},{columnName:"Balance",key:"balance"},{columnName:"Options",key:"options",customComponent:h,customComponentProps:[{key:"id",value:{column:"id"}},{key:"setId",value:{custom:l}},{key:"reload",value:{custom:c}}]}]},values:e}),(0,s.jsx)(r.ZP,{id:d,bodyComponent:u.default,title:"Edit Account",bodyComponentProps:{id:n,modalId:d,reload:c}})]})}function h(e){let{id:t,setId:n,reload:a}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{id:t,reload:a}),(0,s.jsx)("button",{className:"btn btn-xs ml-4",onClick:()=>{n(t),(0,r.K4)(d),(0,r.x8)(d,()=>n(""))},children:"edit"})]})}},6026:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n(7437),a=n(6818),r=n(9625),o=n(4033),i=n(2265),l=n(9721);function c(e){let{id:t,modalId:n,reload:c}=e,u=!!t,d=(0,o.useRouter)(),[m,h]=(0,i.useState)(""),[f,b]=(0,i.useState)(0),[p,x]=(0,i.useState)(!1);async function y(e){e.preventDefault(),x(!0);let{statusCode:s}=u?await i():await o();async function o(){return await (0,l.ts)({name:m,balance:f})}async function i(){return await (0,l.sG)(t,{name:m})}(201===s||200===s)&&(d.refresh(),d.push(a.X.ACCOUNT_PATH),n&&((0,r.Mr)(n),c&&c())),x(!1)}return(0,i.useEffect)(()=>{(async function(){if(!u)return;x(!0);let e=await (0,l.D0)(t);e&&(h(e.name),b(e.balance),x(!1))})()},[t,u]),(0,s.jsx)("form",{onSubmit:y,children:(0,s.jsxs)("fieldset",{className:"form-control gap-2",children:[(0,s.jsxs)("legend",{children:["Input the details of the ",u?"updated":"new"," account"]}),(0,s.jsxs)("div",{className:"w-full flex flex-col md:flex-row gap-2",children:[(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("label",{className:"label",htmlFor:"name",children:(0,s.jsx)("span",{className:"label-text",children:"Name"})}),(0,s.jsx)("input",{id:"name",type:"text",placeholder:"account name",className:"input input-bordered w-full",onChange:e=>h(e.target.value),value:m,required:!0})]}),(0,s.jsxs)("div",{className:"form-control w-full",children:[(0,s.jsx)("label",{className:"label",htmlFor:"balance",children:(0,s.jsx)("span",{className:"label-text",children:"Balance"})}),(0,s.jsx)("input",{id:"balance",type:"number",min:"0.01",step:"0.01",placeholder:"account balance",className:"input input-bordered w-full",onChange:e=>b(Number(e.target.value)),value:f,required:!0,disabled:u})]})]}),(0,s.jsx)("button",{className:"btn",disabled:p,children:u?"Edit":"Create"})]})})}},5501:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(7437);function a(e){let{config:t,values:n}=e;return(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:t.columnSettings.map(e=>{let{columnName:t,key:n}=e;return(0,s.jsx)("th",{children:t},n)})})}),(0,s.jsxs)("tbody",{children:[n.map((e,n)=>(0,s.jsx)("tr",{children:t.columnSettings.map((t,n)=>{let{key:a,customComponent:r,customComponentProps:o}=t;return(0,s.jsx)("td",{children:r?(0,s.jsx)(r,{...function(e,t){let n={};return e.forEach(e=>{let{key:s,value:{column:a,custom:r}}=e;n[s]=a?t[a]:r}),n}(o,e)}):e.hasOwnProperty(a)&&e[a].toString()},n)})},n)),!n.length&&(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:t.columnSettings.length,className:"text-center",children:["No ",t.tableName," avaliable!"]})})]})]})}},9625:function(e,t,n){"use strict";n.d(t,{K4:function(){return r},Mr:function(){return o},ZP:function(){return a},x8:function(){return i}});var s=n(7437);function a(e){let{id:t,title:n,bodyComponent:a,bodyComponentProps:r}=e;return(0,s.jsxs)("dialog",{id:t,className:"modal modal-bottom sm:modal-middle",children:[(0,s.jsxs)("div",{className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:n}),(0,s.jsx)(a,{...r}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn",children:"Close"})})})]}),(0,s.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,s.jsx)("button",{children:"close"})})]})}function r(e){document.getElementById(e).showModal()}function o(e){document.getElementById(e).close()}function i(e,t){document.getElementById(e).addEventListener("close",t)}},3760:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function i(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,i)}l((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreUpdateSupabaseRepository=t.CoreDeleteSupabaseRepository=t.CoreExistsByIdSupabaseRepository=t.CoreFindByIdSupabaseRepository=t.CoreFindAllSupabaseRepository=t.CoreInsertSupabaseRepository=void 0;let a=n(1460);class r{insert(e){return s(this,void 0,void 0,function*(){let{data:t,error:n}=yield this.supabase.from(this.table).insert(e).select().single();if(n)throw new a.InternalServerError(n.message);return t})}constructor(e,t){this.supabase=e,this.table=t}}t.CoreInsertSupabaseRepository=r;class o{findAll(){return s(this,void 0,void 0,function*(){let{data:e,error:t}=yield this.supabase.from(this.table).select();if(t)throw new a.InternalServerError(t.message);return e})}constructor(e,t){this.supabase=e,this.table=t}}t.CoreFindAllSupabaseRepository=o;class i{findById(e){return s(this,void 0,void 0,function*(){let{data:t,error:n}=yield this.supabase.from(this.table).select().eq("id",e).limit(1).single();if(n){if("PGRST116"===n.code)throw new a.NotFoundError(n.details);throw new a.InternalServerError(n.message)}return null!=t?t:void 0})}constructor(e,t){this.supabase=e,this.table=t}}t.CoreFindByIdSupabaseRepository=i;class l{existsById(e){return s(this,void 0,void 0,function*(){let{data:t,error:n}=yield this.supabase.from(this.table).select().eq("id",e).limit(1).single();if(n){if("PGRST116"===n.code)return!1;throw new a.InternalServerError(n.message)}return!!t})}constructor(e,t){this.supabase=e,this.table=t}}t.CoreExistsByIdSupabaseRepository=l;class c{delete(e){return s(this,void 0,void 0,function*(){yield this.supabase.from(this.table).delete().eq("id",e)})}constructor(e,t){this.supabase=e,this.table=t}}t.CoreDeleteSupabaseRepository=c;class u{update(e){return s(this,void 0,void 0,function*(){let{data:t,error:n}=yield this.supabase.from(this.table).update(e).eq("id",e.id).select().single();if(n){if("PGRST116"===n.code)throw new a.NotFoundError(n.details);throw new a.InternalServerError(n.message)}return t})}constructor(e,t){this.supabase=e,this.table=t}}t.CoreUpdateSupabaseRepository=u}},function(e){e.O(0,[596,250,708,721,971,938,744],function(){return e(e.s=5750)}),_N_E=e.O()}]);